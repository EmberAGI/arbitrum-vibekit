# demo/liquidity environment
#
# Usage:
#   cp .env.example .env
#   pnpm dev
#
# This demo can either:
#  - fetch tx plans from Ember via `DEMO_INTENT_FILE` (recommended), and/or
#  - read prebuilt tx plans from `DEMO_TX_FILE`

# Agent (delegatee) address that will redeem delegations
DEMO_DELEGATEE_ADDRESS=0x0000000000000000000000000000000000000000

# Delegatee private key used to SEND the redeem transaction (do not use a real key for demos)
DEMO_DELEGATEE_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# Delegator private key used to SIGN delegations (do not use a real key for demos)
DEMO_DELEGATOR_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# Option A (recommended): provide a single intent JSON file (pool + amounts + toggles)
DEMO_INTENT_FILE=./intent.example.json

# Option B (debug): provide prebuilt tx JSON file(s) (array or { "transactions": [...] })
# DEMO_TX_FILE=./txs.plan.json,./txs.other.plan.json

# Ember base URL (used for intent-derived tx plans)
EMBER_BASE_URL=https://api.emberai.xyz
DEMO_OUT_TX_FILE=./txs.log

# Safety policies (defaults are false)
# DEMO_DELEGATION_TARGET_ALLOWLIST=0x...,0x...
DEMO_ALLOW_NONZERO_VALUE=false
DEMO_ALLOW_EMPTY_CALLDATA=false

# Token scoping + spend caps (used when building long-lived delegations from an intent)
#
# If true, swaps are rejected unless tokenIn/tokenOut are within the intent payable token set.
DEMO_ENFORCE_TOKEN_ALLOWLIST=true
#
# Per-hour spend caps are derived from intent payable token amounts:
#   capPerTokenPerHour = payableAmount * DEMO_SPEND_CAP_MULTIPLIER
# Default multiplier is 6 (i.e. budget for ~5 cycles/hour + buffer).
DEMO_SPEND_CAP_MULTIPLIER=6

# Plan-only simulation (no onchain execution): re-fetch plans over multiple cycles and verify
# the signed delegation intents still authorize the expanded call surface.
#
# NOTE: Setting DEMO_SIMULATE=false does NOT disable Ember API calls when using DEMO_INTENT_FILE.
# The demo still requests the tx plans once per intent action to build the delegation bundle.
# DEMO_SIMULATE=true adds an extra loop that re-requests plans across multiple cycles.
DEMO_SIMULATE=false
DEMO_SIMULATE_CYCLES=5

# Execution (broadcast) settings
# Set to true to redeem delegations + execute the Ember txs onchain.
DEMO_EXECUTE=false

# RPC used for broadcasting the redeem transaction (Arbitrum for this demo).
# If unset, the demo will refuse to execute.
DEMO_RPC_URL=

# Optional: bypass RPC gas estimation by providing a manual gas limit for the
# DelegationManager `redeemDelegations` transaction (useful when `eth_estimateGas`
# is unreliable or returns "gas required exceeds allowance").
# DEMO_GAS_LIMIT=2000000

# Optional: automatically inject `approve(spender=LiquidityManager, amount=max)` txs
# before supply/rebalance actions when the plan omits them.
# DEMO_INJECT_LIQUIDITY_APPROVALS=true

# Debug
DEMO_SKIP_SWAPS=false
DEMO_SHOW_HEX_DETAILS=false
DEMO_PRINT_RESULT_JSON=false

# Print a structured summary of the (permissionContext, mode, executions) tuples
# being submitted to DelegationManager.redeemDelegations(...).
# DEMO_DEBUG_REDEEM=true

# CI-safe defaults for integration/e2e tests.
# Copy this file to `.env.test` to override locally (file is gitignored).

# If set, tests use this URL and skip booting a local onchain-actions worktree.
# Leave unset to auto-boot a local worktree on http://localhost:50051.
ONCHAIN_ACTIONS_API_URL=http://localhost:50051

# If agent/web E2E needs to boot onchain-actions + memgraph locally, point at the worktree.
# Auto-discovery will look for a single `worktrees/onchain-actions-*` directory, but if you have
# more than one, set this explicitly.
# ONCHAIN_ACTIONS_WORKTREE_DIR=/absolute/path/to/forge/worktrees/onchain-actions-001

# Optional: override which docker compose file is used to boot memgraph in the onchain-actions worktree.
# Defaults to `${ONCHAIN_ACTIONS_WORKTREE_DIR}/compose.dev.db.yaml`.
# ONCHAIN_ACTIONS_MEMGRAPH_COMPOSE_FILE=/absolute/path/to/compose.dev.db.yaml

# Optional: onchain-actions boot overrides used by tests/setup/onchainActions.globalSetup.ts.
# These are forwarded to the onchain-actions worktree when the test global setup runs.
# (Most have CI-safe defaults in the setup script, so you typically don't need to set them.)
# COINGECKO_API_KEY=
# COINGECKO_USE_PRO=false
# SQUID_INTEGRATOR_ID=test
# DUNE_API_KEY=test
# BIRDEYE_API_KEY=
# PENDLE_CHAIN_IDS=42161
# ALGEBRA_CHAIN_IDS=42161
# GMX_CHAIN_IDS=42161
# SERVICE_WALLET_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000
# DUST_CHAIN_ID=1
# DUST_CHAIN_RECEIVER_ADDRESS=0x0000000000000000000000000000000000000000

# Allora API (agent is the only component that talks to Allora directly).
ALLORA_API_BASE_URL=https://api.allora.network
# ALLORA_API_KEY=
# ALLORA_CHAIN_ID=ethereum-11155111
#
# Allora topic whitelist enforced in agent config (`src/config/constants.ts`):
# - TOPIC 1:  BTC/USD - Log-Return - 8h
# - TOPIC 3:  SOL/USD - Log-Return - 8h
# - TOPIC 14: BTC/USD - Price - 8h
# - TOPIC 19: NEAR/USD - Log-Return - 8h
# - TOPIC 2:  ETH/USD - Log-Return - 24h
# - TOPIC 16: ETH/USD - Log-Return - 24h
# - TOPIC 2:  ETH/USD - Log-Return - 8h
# - TOPIC 17: SOL/USD - Log-Return - 24h
# - TOPIC 10: SOL/USD - Price - 8h

# Allora inference cache TTLs (ms). Set to 0 to disable caching (useful in tests).
# ALLORA_INFERENCE_CACHE_TTL_MS=0
# ALLORA_8H_INFERENCE_CACHE_TTL_MS=0

# GMX agent runtime controls (optional).
# GMX_ALLORA_MODE=debug  # default is production
# GMX_ALLORA_POLL_INTERVAL_MS=1800000
# GMX_ALLORA_STREAM_LIMIT=-1
# GMX_ALLORA_STATE_HISTORY_LIMIT=100

# Agent wallet (delegatee).
# If GMX_ALLORA_AGENT_WALLET_ADDRESS is not set, it will be derived from A2A_TEST_AGENT_NODE_PRIVATE_KEY.
# GMX_ALLORA_AGENT_WALLET_ADDRESS=0x0000000000000000000000000000000000000000

# Transaction submission mode (tests default to plan-building).
GMX_ALLORA_TX_SUBMISSION_MODE=plan
# A2A_TEST_AGENT_NODE_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# RPC used when transaction broadcasting is enabled.
# ARBITRUM_RPC_URL=https://arb1.arbitrum.io/rpc

# Smoke/E2E helpers.
# Used by tests/smoke/gmx-allora-smoke.ts and apps/web/tests/gmxAllora.system.e2e.test.ts.
SMOKE_WALLET=0x0000000000000000000000000000000000000001
# Optional profile for web-driven E2E:
# - mocked: enable agent-local MSW interceptors for Allora + onchain-actions.
# - live: disable interceptors and use real HTTP providers.
# E2E_PROFILE=mocked
# When DELEGATIONS_BYPASS=false and GMX_ALLORA_TX_SUBMISSION_MODE=execute, smoke runs need a delegator key
# to sign delegations that the agent wallet can redeem.
# SMOKE_DELEGATOR_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000
# SMOKE_USDC_ADDRESS=0x0000000000000000000000000000000000000000

# LangGraph API runner config (optional; used by src/cronApiRunner.ts).
# LANGGRAPH_DEPLOYMENT_URL=http://localhost:8126
# LANGGRAPH_GRAPH_ID=agent-gmx-allora
# STARTER_THREAD_ID=
# STARTER_CRON_INTERVAL_MS=5000
# STARTER_CRON_EXPRESSION=*/5 * * * * *

# Optional: override where the agent looks for config/service.json.
# AGENT_CONFIG_DIR=/absolute/path/to/config/dir
